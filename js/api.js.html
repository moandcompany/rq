<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Record Query</title>
    
    <meta name="description" content="The Javascript components that power rq" />
    
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":true,"cleverLinks":true,"default":{"outputSourceFiles":true},"applicationName":"Record Query","meta":{"title":"Record Query","description":"The Javascript components that power rq"},"linenums":false};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">Record Query</a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
        <li class="item" data-name="module:prelude">
            <span class="title">
                <a href="module-prelude.html">module:prelude</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="module:prelude.add"><a href="module-prelude.html#.add">add</a></li>
            
                <li data-name="module:prelude.all"><a href="module-prelude.html#.all">all</a></li>
            
                <li data-name="module:prelude.any"><a href="module-prelude.html#.any">any</a></li>
            
                <li data-name="module:prelude.assign"><a href="module-prelude.html#.assign">assign</a></li>
            
                <li data-name="module:prelude.at"><a href="module-prelude.html#.at">at</a></li>
            
                <li data-name="module:prelude.camelCase"><a href="module-prelude.html#.camelCase">camelCase</a></li>
            
                <li data-name="module:prelude.capitalize"><a href="module-prelude.html#.capitalize">capitalize</a></li>
            
                <li data-name="module:prelude.ceil"><a href="module-prelude.html#.ceil">ceil</a></li>
            
                <li data-name="module:prelude.chunk"><a href="module-prelude.html#.chunk">chunk</a></li>
            
                <li data-name="module:prelude.collect"><a href="module-prelude.html#.collect">collect</a></li>
            
                <li data-name="module:prelude.compact"><a href="module-prelude.html#.compact">compact</a></li>
            
                <li data-name="module:prelude.concat"><a href="module-prelude.html#.concat">concat</a></li>
            
                <li data-name="module:prelude.conformsTo"><a href="module-prelude.html#.conformsTo">conformsTo</a></li>
            
                <li data-name="module:prelude.count"><a href="module-prelude.html#.count">count</a></li>
            
                <li data-name="module:prelude.countBy"><a href="module-prelude.html#.countBy">countBy</a></li>
            
                <li data-name="module:prelude.deburr"><a href="module-prelude.html#.deburr">deburr</a></li>
            
                <li data-name="module:prelude.defaults"><a href="module-prelude.html#.defaults">defaults</a></li>
            
                <li data-name="module:prelude.defaultsDeep"><a href="module-prelude.html#.defaultsDeep">defaultsDeep</a></li>
            
                <li data-name="module:prelude.difference"><a href="module-prelude.html#.difference">difference</a></li>
            
                <li data-name="module:prelude.differenceBy"><a href="module-prelude.html#.differenceBy">differenceBy</a></li>
            
                <li data-name="module:prelude.differenceWith"><a href="module-prelude.html#.differenceWith">differenceWith</a></li>
            
                <li data-name="module:prelude.divide"><a href="module-prelude.html#.divide">divide</a></li>
            
                <li data-name="module:prelude.drop"><a href="module-prelude.html#.drop">drop</a></li>
            
                <li data-name="module:prelude.dropRight"><a href="module-prelude.html#.dropRight">dropRight</a></li>
            
                <li data-name="module:prelude.dropRightWhile"><a href="module-prelude.html#.dropRightWhile">dropRightWhile</a></li>
            
                <li data-name="module:prelude.dropWhile"><a href="module-prelude.html#.dropWhile">dropWhile</a></li>
            
                <li data-name="module:prelude.endsWith"><a href="module-prelude.html#.endsWith">endsWith</a></li>
            
                <li data-name="module:prelude.eq"><a href="module-prelude.html#.eq">eq</a></li>
            
                <li data-name="module:prelude.escape"><a href="module-prelude.html#.escape">escape</a></li>
            
                <li data-name="module:prelude.escapeRegExp"><a href="module-prelude.html#.escapeRegExp">escapeRegExp</a></li>
            
                <li data-name="module:prelude.every"><a href="module-prelude.html#.every">every</a></li>
            
                <li data-name="module:prelude.fill"><a href="module-prelude.html#.fill">fill</a></li>
            
                <li data-name="module:prelude.filter"><a href="module-prelude.html#.filter">filter</a></li>
            
                <li data-name="module:prelude.find"><a href="module-prelude.html#.find">find</a></li>
            
                <li data-name="module:prelude.findIndex"><a href="module-prelude.html#.findIndex">findIndex</a></li>
            
                <li data-name="module:prelude.findKey"><a href="module-prelude.html#.findKey">findKey</a></li>
            
                <li data-name="module:prelude.findLast"><a href="module-prelude.html#.findLast">findLast</a></li>
            
                <li data-name="module:prelude.findLastIndex"><a href="module-prelude.html#.findLastIndex">findLastIndex</a></li>
            
                <li data-name="module:prelude.findLastKey"><a href="module-prelude.html#.findLastKey">findLastKey</a></li>
            
                <li data-name="module:prelude.flatMap"><a href="module-prelude.html#.flatMap">flatMap</a></li>
            
                <li data-name="module:prelude.flatMapDeep"><a href="module-prelude.html#.flatMapDeep">flatMapDeep</a></li>
            
                <li data-name="module:prelude.flatMapDepth"><a href="module-prelude.html#.flatMapDepth">flatMapDepth</a></li>
            
                <li data-name="module:prelude.flatten"><a href="module-prelude.html#.flatten">flatten</a></li>
            
                <li data-name="module:prelude.flattenDeep"><a href="module-prelude.html#.flattenDeep">flattenDeep</a></li>
            
                <li data-name="module:prelude.flattenDepth"><a href="module-prelude.html#.flattenDepth">flattenDepth</a></li>
            
                <li data-name="module:prelude.floor"><a href="module-prelude.html#.floor">floor</a></li>
            
                <li data-name="module:prelude.fromPairs"><a href="module-prelude.html#.fromPairs">fromPairs</a></li>
            
                <li data-name="module:prelude.get"><a href="module-prelude.html#.get">get</a></li>
            
                <li data-name="module:prelude.groupBy"><a href="module-prelude.html#.groupBy">groupBy</a></li>
            
                <li data-name="module:prelude.gt"><a href="module-prelude.html#.gt">gt</a></li>
            
                <li data-name="module:prelude.gte"><a href="module-prelude.html#.gte">gte</a></li>
            
                <li data-name="module:prelude.has"><a href="module-prelude.html#.has">has</a></li>
            
                <li data-name="module:prelude.head"><a href="module-prelude.html#.head">head</a></li>
            
                <li data-name="module:prelude.id"><a href="module-prelude.html#.id">id</a></li>
            
                <li data-name="module:prelude.includes"><a href="module-prelude.html#.includes">includes</a></li>
            
                <li data-name="module:prelude.indexOf"><a href="module-prelude.html#.indexOf">indexOf</a></li>
            
                <li data-name="module:prelude.initial"><a href="module-prelude.html#.initial">initial</a></li>
            
                <li data-name="module:prelude.intersection"><a href="module-prelude.html#.intersection">intersection</a></li>
            
                <li data-name="module:prelude.intersectionBy"><a href="module-prelude.html#.intersectionBy">intersectionBy</a></li>
            
                <li data-name="module:prelude.intersectionWith"><a href="module-prelude.html#.intersectionWith">intersectionWith</a></li>
            
                <li data-name="module:prelude.invert"><a href="module-prelude.html#.invert">invert</a></li>
            
                <li data-name="module:prelude.invertBy"><a href="module-prelude.html#.invertBy">invertBy</a></li>
            
                <li data-name="module:prelude.invoke"><a href="module-prelude.html#.invoke">invoke</a></li>
            
                <li data-name="module:prelude.invokeMap"><a href="module-prelude.html#.invokeMap">invokeMap</a></li>
            
                <li data-name="module:prelude.isArray"><a href="module-prelude.html#.isArray">isArray</a></li>
            
                <li data-name="module:prelude.isArrayBuffer"><a href="module-prelude.html#.isArrayBuffer">isArrayBuffer</a></li>
            
                <li data-name="module:prelude.isArrayLike"><a href="module-prelude.html#.isArrayLike">isArrayLike</a></li>
            
                <li data-name="module:prelude.isArrayLikeObject"><a href="module-prelude.html#.isArrayLikeObject">isArrayLikeObject</a></li>
            
                <li data-name="module:prelude.isBoolean"><a href="module-prelude.html#.isBoolean">isBoolean</a></li>
            
                <li data-name="module:prelude.isBuffer"><a href="module-prelude.html#.isBuffer">isBuffer</a></li>
            
                <li data-name="module:prelude.isDate"><a href="module-prelude.html#.isDate">isDate</a></li>
            
                <li data-name="module:prelude.isEmpty"><a href="module-prelude.html#.isEmpty">isEmpty</a></li>
            
                <li data-name="module:prelude.isEqual"><a href="module-prelude.html#.isEqual">isEqual</a></li>
            
                <li data-name="module:prelude.isEqualWith"><a href="module-prelude.html#.isEqualWith">isEqualWith</a></li>
            
                <li data-name="module:prelude.join"><a href="module-prelude.html#.join">join</a></li>
            
                <li data-name="module:prelude.kebabCase"><a href="module-prelude.html#.kebabCase">kebabCase</a></li>
            
                <li data-name="module:prelude.keyBy"><a href="module-prelude.html#.keyBy">keyBy</a></li>
            
                <li data-name="module:prelude.keys"><a href="module-prelude.html#.keys">keys</a></li>
            
                <li data-name="module:prelude.last"><a href="module-prelude.html#.last">last</a></li>
            
                <li data-name="module:prelude.lastIndexOf"><a href="module-prelude.html#.lastIndexOf">lastIndexOf</a></li>
            
                <li data-name="module:prelude.lowerCase"><a href="module-prelude.html#.lowerCase">lowerCase</a></li>
            
                <li data-name="module:prelude.lowerFirst"><a href="module-prelude.html#.lowerFirst">lowerFirst</a></li>
            
                <li data-name="module:prelude.map"><a href="module-prelude.html#.map">map</a></li>
            
                <li data-name="module:prelude.mapKeys"><a href="module-prelude.html#.mapKeys">mapKeys</a></li>
            
                <li data-name="module:prelude.mapValues"><a href="module-prelude.html#.mapValues">mapValues</a></li>
            
                <li data-name="module:prelude.max"><a href="module-prelude.html#.max">max</a></li>
            
                <li data-name="module:prelude.maxBy"><a href="module-prelude.html#.maxBy">maxBy</a></li>
            
                <li data-name="module:prelude.mean"><a href="module-prelude.html#.mean">mean</a></li>
            
                <li data-name="module:prelude.meanBy"><a href="module-prelude.html#.meanBy">meanBy</a></li>
            
                <li data-name="module:prelude.min"><a href="module-prelude.html#.min">min</a></li>
            
                <li data-name="module:prelude.minBy"><a href="module-prelude.html#.minBy">minBy</a></li>
            
                <li data-name="module:prelude.modify"><a href="module-prelude.html#.modify">modify</a></li>
            
                <li data-name="module:prelude.multiply"><a href="module-prelude.html#.multiply">multiply</a></li>
            
                <li data-name="module:prelude.now"><a href="module-prelude.html#.now">now</a></li>
            
                <li data-name="module:prelude.nth"><a href="module-prelude.html#.nth">nth</a></li>
            
                <li data-name="module:prelude.orderBy"><a href="module-prelude.html#.orderBy">orderBy</a></li>
            
                <li data-name="module:prelude.pad"><a href="module-prelude.html#.pad">pad</a></li>
            
                <li data-name="module:prelude.padEnd"><a href="module-prelude.html#.padEnd">padEnd</a></li>
            
                <li data-name="module:prelude.padStart"><a href="module-prelude.html#.padStart">padStart</a></li>
            
                <li data-name="module:prelude.parseInt"><a href="module-prelude.html#.parseInt">parseInt</a></li>
            
                <li data-name="module:prelude.partition"><a href="module-prelude.html#.partition">partition</a></li>
            
                <li data-name="module:prelude.random"><a href="module-prelude.html#.random">random</a></li>
            
                <li data-name="module:prelude.reduce"><a href="module-prelude.html#.reduce">reduce</a></li>
            
                <li data-name="module:prelude.reduceRight"><a href="module-prelude.html#.reduceRight">reduceRight</a></li>
            
                <li data-name="module:prelude.reject"><a href="module-prelude.html#.reject">reject</a></li>
            
                <li data-name="module:prelude.repeat"><a href="module-prelude.html#.repeat">repeat</a></li>
            
                <li data-name="module:prelude.replace"><a href="module-prelude.html#.replace">replace</a></li>
            
                <li data-name="module:prelude.reverse"><a href="module-prelude.html#.reverse">reverse</a></li>
            
                <li data-name="module:prelude.round"><a href="module-prelude.html#.round">round</a></li>
            
                <li data-name="module:prelude.sample"><a href="module-prelude.html#.sample">sample</a></li>
            
                <li data-name="module:prelude.sampleSize"><a href="module-prelude.html#.sampleSize">sampleSize</a></li>
            
                <li data-name="module:prelude.select"><a href="module-prelude.html#.select">select</a></li>
            
                <li data-name="module:prelude.shuffle"><a href="module-prelude.html#.shuffle">shuffle</a></li>
            
                <li data-name="module:prelude.size"><a href="module-prelude.html#.size">size</a></li>
            
                <li data-name="module:prelude.slice"><a href="module-prelude.html#.slice">slice</a></li>
            
                <li data-name="module:prelude.snakeCase"><a href="module-prelude.html#.snakeCase">snakeCase</a></li>
            
                <li data-name="module:prelude.some"><a href="module-prelude.html#.some">some</a></li>
            
                <li data-name="module:prelude.sort"><a href="module-prelude.html#.sort">sort</a></li>
            
                <li data-name="module:prelude.sortBy"><a href="module-prelude.html#.sortBy">sortBy</a></li>
            
                <li data-name="module:prelude.sortedIndex"><a href="module-prelude.html#.sortedIndex">sortedIndex</a></li>
            
                <li data-name="module:prelude.sortedIndexBy"><a href="module-prelude.html#.sortedIndexBy">sortedIndexBy</a></li>
            
                <li data-name="module:prelude.sortedIndexOf"><a href="module-prelude.html#.sortedIndexOf">sortedIndexOf</a></li>
            
                <li data-name="module:prelude.sortedLastIndex"><a href="module-prelude.html#.sortedLastIndex">sortedLastIndex</a></li>
            
                <li data-name="module:prelude.sortedLastIndexBy"><a href="module-prelude.html#.sortedLastIndexBy">sortedLastIndexBy</a></li>
            
                <li data-name="module:prelude.sortedLastIndexOf"><a href="module-prelude.html#.sortedLastIndexOf">sortedLastIndexOf</a></li>
            
                <li data-name="module:prelude.sortedUniq"><a href="module-prelude.html#.sortedUniq">sortedUniq</a></li>
            
                <li data-name="module:prelude.sortedUniqBy"><a href="module-prelude.html#.sortedUniqBy">sortedUniqBy</a></li>
            
                <li data-name="module:prelude.split"><a href="module-prelude.html#.split">split</a></li>
            
                <li data-name="module:prelude.spread"><a href="module-prelude.html#.spread">spread</a></li>
            
                <li data-name="module:prelude.startCase"><a href="module-prelude.html#.startCase">startCase</a></li>
            
                <li data-name="module:prelude.startsWith"><a href="module-prelude.html#.startsWith">startsWith</a></li>
            
                <li data-name="module:prelude.subtract"><a href="module-prelude.html#.subtract">subtract</a></li>
            
                <li data-name="module:prelude.sum"><a href="module-prelude.html#.sum">sum</a></li>
            
                <li data-name="module:prelude.sumBy"><a href="module-prelude.html#.sumBy">sumBy</a></li>
            
                <li data-name="module:prelude.tail"><a href="module-prelude.html#.tail">tail</a></li>
            
                <li data-name="module:prelude.take"><a href="module-prelude.html#.take">take</a></li>
            
                <li data-name="module:prelude.takeRight"><a href="module-prelude.html#.takeRight">takeRight</a></li>
            
                <li data-name="module:prelude.takeRightWhile"><a href="module-prelude.html#.takeRightWhile">takeRightWhile</a></li>
            
                <li data-name="module:prelude.takeWhile"><a href="module-prelude.html#.takeWhile">takeWhile</a></li>
            
                <li data-name="module:prelude.tee"><a href="module-prelude.html#.tee">tee</a></li>
            
                <li data-name="module:prelude.template"><a href="module-prelude.html#.template">template</a></li>
            
                <li data-name="module:prelude.toLower"><a href="module-prelude.html#.toLower">toLower</a></li>
            
                <li data-name="module:prelude.toUpper"><a href="module-prelude.html#.toUpper">toUpper</a></li>
            
                <li data-name="module:prelude.trim"><a href="module-prelude.html#.trim">trim</a></li>
            
                <li data-name="module:prelude.trimEnd"><a href="module-prelude.html#.trimEnd">trimEnd</a></li>
            
                <li data-name="module:prelude.trimStart"><a href="module-prelude.html#.trimStart">trimStart</a></li>
            
                <li data-name="module:prelude.truncate"><a href="module-prelude.html#.truncate">truncate</a></li>
            
                <li data-name="module:prelude.unescape"><a href="module-prelude.html#.unescape">unescape</a></li>
            
                <li data-name="module:prelude.union"><a href="module-prelude.html#.union">union</a></li>
            
                <li data-name="module:prelude.unionBy"><a href="module-prelude.html#.unionBy">unionBy</a></li>
            
                <li data-name="module:prelude.unionWith"><a href="module-prelude.html#.unionWith">unionWith</a></li>
            
                <li data-name="module:prelude.uniq"><a href="module-prelude.html#.uniq">uniq</a></li>
            
                <li data-name="module:prelude.uniqBy"><a href="module-prelude.html#.uniqBy">uniqBy</a></li>
            
                <li data-name="module:prelude.uniqWith"><a href="module-prelude.html#.uniqWith">uniqWith</a></li>
            
                <li data-name="module:prelude.unzip"><a href="module-prelude.html#.unzip">unzip</a></li>
            
                <li data-name="module:prelude.unzipWith"><a href="module-prelude.html#.unzipWith">unzipWith</a></li>
            
                <li data-name="module:prelude.upperCase"><a href="module-prelude.html#.upperCase">upperCase</a></li>
            
                <li data-name="module:prelude.upperFirst"><a href="module-prelude.html#.upperFirst">upperFirst</a></li>
            
                <li data-name="module:prelude.without"><a href="module-prelude.html#.without">without</a></li>
            
                <li data-name="module:prelude.words"><a href="module-prelude.html#.words">words</a></li>
            
                <li data-name="module:prelude.xor"><a href="module-prelude.html#.xor">xor</a></li>
            
                <li data-name="module:prelude.xorBy"><a href="module-prelude.html#.xorBy">xorBy</a></li>
            
                <li data-name="module:prelude.xorWith"><a href="module-prelude.html#.xorWith">xorWith</a></li>
            
                <li data-name="module:prelude.zip"><a href="module-prelude.html#.zip">zip</a></li>
            
                <li data-name="module:prelude.zipWith"><a href="module-prelude.html#.zipWith">zipWith</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="api.js.html">Source: api.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source "><code>"use strict";
/**
 * This file contains the rq Javascript API implementation.  It's used
 * by for example the `prelude` module.
 * @module api
 * @private
 */

/**
 * The `rq` namespace, containing the `rq` API.
 *
 * @namespace
 * @private
 */
var rq = rq || {};

/**
 * The type of `this` for all of the rq stream processing functions (defined for example in
 * `prelude.js`)
 *
 * @param {rq.Logger} log The logger to use in this context.
 * @constructor
 * @private
 */
rq.Context = function Context(log) {
  /**
   * A logger object that can be used to send log messages to the user.
   *
   * @type {rq.Logger}
   * @private
   */
  this.log = log; // Writable because Process overwrites it.

  /**
   * The current value from the input value stream.  Will be `undefined` until {@link
   * rq.Context#pull} has been called and returned `true`.
   * @private
   */
  this.value = undefined;

  /**
   * Pulls the next value in the input value stream, storing it into `this.value`.
   *
   * @return {boolean} Whether there was another value in the stream.
   * @private
   */
  this.pull = function* pull() {
    var result = yield {type: 'await'};

    if (result.hasNext) {
      this.value = result.next;
      return true;
    } else {
      return false;
    }
  };

  /**
   * Pushes a value into the output value stream.
   *
   * @param {*} value The value to push.
   * @private
   */
  this.push = function* push(value) {
    yield {type: 'emit', value: value};
  };

  /**
   * Collects all values from the input stream, consuming it fully.
   *
   * @returns {Array} The values that were in the input stream.
   * @private
   */
  this.collect = function* collect() {
    var result = [];
    while (yield* this.pull()) {
      result.push(this.value);
    }
    return result;
  };

  /**
   * Spreads the specified values into the output stream, pushing each of them in order.
   *
   * @param {Array} values The values to push to the output stream.
   * @private
   */
  this.spread = function* spread(values) {
    for (var i = 0; i &lt; values.length; i++) {
      yield* this.push(values[i]);
    }
  };

  Object.seal(this);
};

/**
 * A logger that can be used to log messages.
 *
 * @param {string} name The name of the logger.
 * @constructor
 * @private
 */
rq.Logger = function Logger(name) {
  /**
   * Logs something at the trace level.
   *
   * @param {...*} args Arbitrary values to log.
   */
  this.trace = function trace(args) {
    rq.native.log(0, name, ...arguments);
  };

  /**
   * Logs something at the debug level.
   *
   * @param {...*} args Arbitrary values to log.
   * @private
   */
  this.debug = function debug(args) {
    rq.native.log(1, name, ...arguments);
  };

  /**
   * Logs something at the info level.
   *
   * @param {...*} args Arbitrary values to log.
   * @private
   */
  this.info = function info(args) {
    rq.native.log(2, name, ...arguments);
  };

  /**
   * Logs something at the warning level.
   *
   * @param {...*} args Arbitrary values to log.
   * @private
   */
  this.warn = function warn(args) {
    rq.native.log(3, name, ...arguments);
  };

  /**
   * Logs something at the error level.
   *
   * @param {...*} args Arbitrary values to log.
   * @private
   */
  this.error = function error(args) {
    rq.native.log(4, name, ...arguments);
  };

  Object.freeze(this);
};

/**
 * Utility functions used by many rq processes.
 *
 * @namespace
 * @private
 */
rq.util = {};

/**
 * The log object used by this module.
 *
 * @type {rq.Logger}
 * @private
 */
Object.defineProperty(rq.util, 'log', {value: new rq.Logger('rq.util')});

/**
 * A lens that can be used to interact with some encapsulated value.
 *
 * @param {function(): *} get The getter for the value.
 * @param {function(*)} set The setter for the value.
 * @constructor
 * @private
 */
rq.util.Lens = function Lens(get, set) {
  /**
   * Gets the encapsulated value.
   * @return {*} The current value.
   * @private
   */
  this.get = get;

  /**
   * Sets the encapsulated value.
   * @param {*} value The new value to set.
   * @private
   */
  this.set = set;

  Object.freeze(this);
};

/**
 * Evaluates a path into an object, returning an array of `Lens`es with the targets of the path.
 *
 * The supported path syntaxes include [JSONPath][1] and [JSON pointers][2].
 *
 * [1]: https://github.com/dchester/jsonpath
 * [2]: https://tools.ietf.org/html/rfc6901
 *
 * @param {(Object|Array)} obj The object to traverse.
 * @param {string} path The path into the object.
 * @return {Array&lt;rq.util.Lens>} A lens that can be used to manipulate the targeted values.
 * @private
 */
rq.util.path = function path(obj, path) {
  if (typeof path === 'string' &amp;&amp; path.length > 0) {
    if (path.charAt(0) === '/') {
      // Assume it's a JSON pointer

      var elems = path.substring(1).split(/\//).map(function unescape(elem) {
        return elem.replace(/~1/g, '/').replace(/~2/g, '~');
      });

      if (elems.length === 0) {
        throw new Error(`Path projection is empty: ${JSON.stringify(path)}`);
      }

      var last = elems.pop();

      elems.forEach(function(elem) {
        if (obj &amp;&amp; elem in obj) {
          obj = obj[elem];
        } else {
          obj = undefined;
        }
      });

      if (obj &amp;&amp; last in obj) {
        return [new rq.util.Lens(function get() {
          return obj[last];
        }, function set(v) {
          obj[last] = v;
        })];
      } else {
        return [];
      }
    } else {
      throw new Error(`Unrecognized path syntax: ${JSON.stringify(path)}`);
    }
  } else {
    throw new Error(`Cannot be used as a path: ${JSON.stringify(path)}`);
  }
};

Object.freeze(rq.util);

/**
 * An rq process that encapsulates a coroutine.  It's probably not a good idea to construct an
 * instance of this manually.
 *
 * @constructor
 * @private
 */
rq.Process = function Process(fn) {
  var ctx = new rq.Context(new rq.Logger(fn.name));
  var generator = undefined;

  this.resume = function resume(params) {
    switch (params.type) {
    case 'start': {
      // Replace logger by more detailed one
      var name = `${fn.name}(${params.args.map(JSON.stringify).join(', ')})`;
      ctx.log = new rq.Logger(name);
      generator = fn.apply(ctx, params.args);
      break;
    }
    case 'pending': {
      return generator.next().value;
    }
    case 'await': {
      return generator.next(params).value;
    }
    default:
      throw Error(`Unrecognized resume type ${params.type}`);
    }
  };

  Object.freeze(this);
};

Object.freeze(rq);
</code></pre>
        </article>
    </section>






        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Thu Dec 08 2016 20:21:12 GMT+0000 (UTC)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>
